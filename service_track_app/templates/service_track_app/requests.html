{% extends "service_track_app/base.html" %}
{% block title %}–ú–æ–∏ –∑–∞—è–≤–∫–∏{% endblock %}

{% block content %}
<div class="requests-section">
    <div class="requests-header">
        <div class="requests-title">–ú–æ–∏ –∑–∞—è–≤–∫–∏</div>
    </div>

    {% if requests %}
        <div class="requests-table-container">
            <table class="requests-table">
                <thead>
                    <tr>
                        <th>‚Ññ –∑–∞—è–≤–∫–∏</th>
                        <th>–°–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä</th>
                        <th>–ú–æ–¥–µ–ª—å</th>
                        <th>–ü–æ–∫—É–ø–∞—Ç–µ–ª—å</th>
                        <th>–ü—Ä–æ–±–ª–µ–º–∞</th>
                        <th>–ì–∞—Ä–∞–Ω—Ç–∏—è</th>
                        <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in requests %}
                        <tr class="request-row" onclick="window.location.href='{% url 'request_detail' r.id %}'">
                            <td class="request-id">#{{ r.id }}</td>
                            <td>{{ r.serial_number }}</td>
                            <td>{{ r.model_name }}</td>
                            <td>{{ r.customer_name }}</td>
                            <td title="{{ r.problem_description }}">
                                {{ r.problem_description|truncatechars:50 }}
                            </td>
                            <td>
                                {% if r.warranty_status == "warranty" %}
                                    <span class="request-status status-sent">–ù–∞ –≥–∞—Ä–∞–Ω—Ç–∏–∏</span>
                                {% elif r.warranty_status == "expired" %}
                                    <span class="request-status status-created">–ì–∞—Ä–∞–Ω—Ç–∏—è –∏—Å—Ç–µ–∫–ª–∞</span>
                                {% else %}
                                    <span class="request-status status-created">–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ</span>
                                {% endif %}
                            </td>
                            <td class="request-date">{{ r.created_at|date:"d.m.Y H:i" }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">üìã</div>
            <div class="empty-state-text">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞—è–≤–æ–∫</div>
            <div class="empty-state-subtext">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞—è–≤–∫—É –≤–æ –≤–∫–ª–∞–¥–∫–µ "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É"</div>
        </div>
    {% endif %}
</div>
{% endblock %}
