{% extends "service_track_app/base.html" %}
{% block title %}–ü–æ—Å—Ç—É–ø–∏–≤—à–∏–µ –≤ –°–¶{% endblock %}

{% block content %}
<div class="received-section">
    <div class="received-header">
        <div class="received-title">–ü–æ—Å—Ç—É–ø–∏–≤—à–∏–µ –≤ –°–¶</div>
    </div>

    <div class="filter-controls">
        <button onclick="toggleReceivedView('packages')">üì¶ –ü–∞–∫–µ—Ç—ã</button>
        <button onclick="toggleReceivedView('requests')">üìÑ –ó–∞—è–≤–∫–∏</button>
        <select onchange="filterReceivedStatus(this.value)">
            <option value="all">–í—Å–µ</option>
            <option value="received">–ü–æ—Å—Ç—É–ø–∏–ª</option>
            <option value="inprogress">–í —Ä–∞–±–æ—Ç–µ</option>
            <option value="completed">–ó–∞–≤–µ—Ä—à–µ–Ω</option>
        </select>
    </div>

    {% if repair_requests %}
        <div class="requests-table-container">
            <table class="requests-table">
                <thead>
                    <tr>
                        <th>‚Ññ –∑–∞—è–≤–∫–∏</th>
                        <th>–°–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä</th>
                        <th>–ú–æ–¥–µ–ª—å</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–î–∞—Ç–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for request in repair_requests %}
                        <tr class="request-row">
                            <td class="request-id">#{{ request.id }}</td>
                            <td>{{ request.serial_number }}</td>
                            <td>{{ request.model_name }}</td>
                            <td>
                                {% if request.warranty_status == "warranty" %}
                                    <span class="request-status status-sent">–ù–∞ –≥–∞—Ä–∞–Ω—Ç–∏–∏</span>
                                {% elif request.warranty_status == "expired" %}
                                    <span class="request-status status-created">–ì–∞—Ä–∞–Ω—Ç–∏—è –∏—Å—Ç–µ–∫–ª–∞</span>
                                {% else %}
                                    <span class="request-status status-created">–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ</span>
                                {% endif %}
                            </td>
                            <td class="request-date">{{ request.created_at|date:"d.m.Y H:i" }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">üìã</div>
            <div class="empty-state-text">–ù–µ—Ç –∑–∞—è–≤–æ–∫ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
        </div>
    {% endif %}
</div>
{% endblock %}
